{"ast":null,"code":"import { MongoClient } from 'mongodb'; // /api/new-meetup\n// POST /api/new-meetup\n\nasync function handler(req, res) {\n  if (req.method === 'POST') {\n    const data = req.body;\n    const client = await MongoClient.connect('mongodb+srv://NovaAnn:kwmwBi9wmLJ0nYBw@cluster0.nn0w8.mongodb.net/myNextDatabase?retryWrites=true&w=majority');\n    const db = client.db();\n    const meetupsCollection = db.collection('meetups');\n    const result = await meetupsCollection.insertOne(data);\n    console.log(result);\n    client.close();\n    res.status(201).json({\n      message: 'Meetup inserted!'\n    });\n  } else {\n    console.log('inside api2');\n    console.log(req.query);\n    const client2 = await MongoClient.connect('mongodb+srv://NovaAnn:kwmwBi9wmLJ0nYBw@cluster0.nn0w8.mongodb.net/myNextDatabase?retryWrites=true&w=majority');\n    const db2 = client2.db();\n    const meetupsCollection2 = db2.collection('meetups');\n    console.log('Meetp collection');\n    const result2 = meetupsCollection2.aggregate({\n      $project: {\n        title: 1,\n        image: 1,\n        item: 1,\n        address: 1,\n        price: 1,\n        location: 1,\n        description: 1,\n        priceInt: {\n          $toInt: \"$location\"\n        }\n      }\n    });\n    console.log(result2);\n    client2.close();\n    res.status(201).json({\n      message: 'Meetup inserted!'\n    });\n  }\n}\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}